
### üõ°Ô∏è The "Gold Master" Repair Prompt

We have a regression. The Z-index fix worked, but it broke the Resizing logic (sticky mouse returned, bottom handle lost).

I need you to **REPLACE** the Resizing CSS and JavaScript entirely with this "Consolidated" version that combines all previous fixes.

**1. CHECK HTML:**
Ensure this exact structure exists inside `#video-stage`. If `#iframe-shield` is missing, add it.
```html
<div id="video-stage">
    <div id="yt-player"></div>
    <div id="iframe-shield"></div> 
</div>

```

**2. REPLACE CSS (The "Safe" Styles):**
Replace your layout CSS with this block to ensure handles are visible and layers are solid.

```css
/* --- LAYOUT & LAYERING --- */
#left-panel, #player-panel, #video-stage {
    position: relative;
    background-color: #101922 !important; /* Solid background */
    box-sizing: border-box;
}

#left-panel { z-index: 10; border-right: 1px solid #233648; }
#player-panel { z-index: 20; display: flex; flex-direction: column; min-width: 0; }

/* The Safety Shield (Invisible until dragging) */
#iframe-shield {
    position: absolute;
    top: 0; left: 0; width: 100%; height: 100%;
    z-index: 9999;
    display: none; /* Hidden by default */
}

/* --- SPLITTERS --- */
#splitter-vertical {
    width: 12px;
    background: #0d1218;
    border-left: 1px solid #233648;
    border-right: 1px solid #233648;
    cursor: col-resize;
    z-index: 50; /* Above everything */
    flex-shrink: 0;
}
#splitter-vertical:hover { background: #137fec; }

#splitter-horizontal {
    height: 12px;
    background: #0d1218;
    border-top: 1px solid #233648;
    border-bottom: 1px solid #233648;
    cursor: row-resize;
    z-index: 50; /* Above everything */
    width: 100%;
    display: block !important; /* Force Visibility */
    flex-shrink: 0;
}
#splitter-horizontal:hover { background: #137fec; }

```

**3. REPLACE JavaScript (The "Window-Level" Logic):**
Overwrite the `makeResizable` function with this version.

```javascript
function makeResizable() {
    const leftPanel = document.getElementById('left-panel');
    const videoStage = document.getElementById('video-stage');
    const vSplitter = document.getElementById('splitter-vertical');
    const hSplitter = document.getElementById('splitter-horizontal');
    const shield = document.getElementById('iframe-shield');

    if (!shield) console.error("CRITICAL: #iframe-shield is missing from HTML!");

    // Helper: Activate Shield to prevent Iframe from stealing mouse
    function startDrag() {
        if(shield) shield.style.display = 'block';
        document.body.style.userSelect = 'none';
        document.body.style.pointerEvents = 'none'; // Freeze other interactions
    }

    // Helper: Deactivate Shield
    function stopDrag() {
        if(shield) shield.style.display = 'none';
        document.body.style.userSelect = 'auto';
        document.body.style.pointerEvents = 'auto';
        document.body.style.cursor = 'default';
    }

    // --- Vertical Resize (Sidebar) ---
    if (vSplitter) {
        vSplitter.onmousedown = function(e) {
            e.preventDefault();
            startDrag();
            document.body.style.cursor = 'col-resize';
            
            function onMouseMove(moveEvent) {
                let newWidth = moveEvent.clientX;
                // Min safety 50px, no max limit
                if (newWidth < 50) newWidth = 50;
                leftPanel.style.width = newWidth + 'px';
                localStorage.setItem('layout_sidebar_width', newWidth);
            }
            
            function onMouseUp() {
                stopDrag();
                window.removeEventListener('mousemove', onMouseMove);
                window.removeEventListener('mouseup', onMouseUp);
            }
            // Listen on WINDOW to catch fast movements
            window.addEventListener('mousemove', onMouseMove);
            window.addEventListener('mouseup', onMouseUp);
        };
    }

    // --- Horizontal Resize (Video Height) ---
    if (hSplitter) {
        hSplitter.onmousedown = function(e) {
            e.preventDefault();
            startDrag();
            document.body.style.cursor = 'row-resize';
            
            const startY = e.clientY;
            const startHeight = videoStage.getBoundingClientRect().height;

            function onMouseMove(moveEvent) {
                const delta = moveEvent.clientY - startY;
                let newHeight = startHeight + delta;
                // Min safety 50px
                if (newHeight < 50) newHeight = 50;
                videoStage.style.height = newHeight + 'px';
            }

            function onMouseUp() {
                stopDrag();
                window.removeEventListener('mousemove', onMouseMove);
                window.removeEventListener('mouseup', onMouseUp);
            }
            // Listen on WINDOW
            window.addEventListener('mousemove', onMouseMove);
            window.addEventListener('mouseup', onMouseUp);
        };
    }
}

```

Please apply this complete replacement.

