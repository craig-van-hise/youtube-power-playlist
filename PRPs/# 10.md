
The layout is stable, but resizing is currently disabled. I need to re-enable the "Drag to Resize" functionality for both the Sidebar and the Video player.

Please update `src/publishing/template/index.html.j2` with the following changes:

**1. HTML: Ensure Splitters Exist**
   - Check that there is a `<div id="splitter-vertical"></div>` placed **between** `#left-panel` and `#player-panel`.
   - Check that there is a `<div id="splitter-horizontal"></div>` placed **immediately after** `#video-stage` (inside `#player-panel`).

**2. CSS: Visual Styles for Splitters**
   Add this to your `<style>` block if missing:
   ```css
   #splitter-vertical {
       width: 8px;
       background: #111a22;
       cursor: col-resize;
       z-index: 20;
       border-left: 1px solid #233648;
       transition: background 0.2s;
   }
   #splitter-vertical:hover { background: #137fec; }

   #splitter-horizontal {
       height: 8px;
       background: #111a22;
       cursor: row-resize;
       width: 100%;
       border-top: 1px solid #233648;
       border-bottom: 1px solid #233648;
   }
   #splitter-horizontal:hover { background: #137fec; }

```

**3. JavaScript: The `makeResizable` Logic**

* **Uncomment/Call** `makeResizable()` inside your `onYouTubeIframeAPIReady` or at the end of `setMode`.
* **Replace** the `makeResizable` function with this logic:

```javascript
function makeResizable() {
    const leftPanel = document.getElementById('left-panel');
    const videoStage = document.getElementById('video-stage');
    const vSplitter = document.getElementById('splitter-vertical');
    const hSplitter = document.getElementById('splitter-horizontal');

    // --- Vertical Resize (Sidebar Width) ---
    if (vSplitter) {
        let isResizing = false;
        vSplitter.addEventListener('mousedown', (e) => {
            isResizing = true;
            document.body.style.cursor = 'col-resize';
            e.preventDefault(); // Stop text selection
        });

        document.addEventListener('mousemove', (e) => {
            if (!isResizing) return;
            // Calculate new width
            let newWidth = e.clientX; 
            // Enforce Limits (Min 250px, Max 50% of screen)
            if (newWidth < 250) newWidth = 250;
            if (newWidth > window.innerWidth * 0.5) newWidth = window.innerWidth * 0.5;
            
            leftPanel.style.width = newWidth + 'px';
            localStorage.setItem('layout_sidebar_width', newWidth);
        });

        document.addEventListener('mouseup', () => {
            if (isResizing) {
                isResizing = false;
                document.body.style.cursor = 'default';
            }
        });
    }

    // --- Horizontal Resize (Video Height) ---
    if (hSplitter) {
        let isResizingV = false;
        hSplitter.addEventListener('mousedown', (e) => {
            isResizingV = true;
            document.body.style.cursor = 'row-resize';
            e.preventDefault();
        });

        document.addEventListener('mousemove', (e) => {
            if (!isResizingV) return;
            // Calculate height based on sidebar offset
            const rect = videoStage.getBoundingClientRect();
            let newHeight = e.clientY - rect.top;
            
            // Enforce Limits (Min 200px, Max 80% of panel)
            if (newHeight < 200) newHeight = 200;
            
            videoStage.style.height = newHeight + 'px';
            // Note: You might want to save video height to localStorage too
        });

        document.addEventListener('mouseup', () => {
            if (isResizingV) {
                isResizingV = false;
                document.body.style.cursor = 'default';
            }
        });
    }
}


