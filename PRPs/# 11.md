

The resizing functionality has critical bugs.
1. **Visual Glitch:** The video container appears translucent during resize, showing the playlist underneath. This means they are overlapping. We need solid backgrounds and strict Flexbox boundaries.
2. **Sticky Mouse:** The drag gets stuck because the `mouseup` event is missing if the mouse moves too fast.
3. **Missing Handle:** The bottom horizontal splitter is missing.
4. **Size Lock:** I cannot shrink the video (make the sidebar wider) beyond a certain point.

Please **REPLACE** the CSS and JavaScript sections in `src/publishing/template/index.html.j2` with this corrected code.

**1. CSS Fixes (Replace relevant parts in `<style>`):**
```css
/* Ensure panels are opaque and don't overlap */
#left-panel, #player-panel {
    position: relative;
    background: #101922; /* Solid background prevents see-through */
    z-index: 10;
}

/* Horizontal Splitter - Make it visible */
#splitter-horizontal {
    height: 12px; /* Thicker for easier grabbing */
    background: #111a22;
    cursor: row-resize;
    border-top: 1px solid #233648;
    border-bottom: 1px solid #233648;
    width: 100%;
    display: block; /* Ensure visibility */
    flex-shrink: 0;
}
#splitter-horizontal:hover { background: #137fec; }

/* Vertical Splitter */
#splitter-vertical {
    width: 12px;
    background: #111a22;
    cursor: col-resize;
    border-left: 1px solid #233648;
    border-right: 1px solid #233648;
    z-index: 20;
    flex-shrink: 0;
}
#splitter-vertical:hover { background: #137fec; }

```

**2. HTML Structure Check (Ensure this structure exists inside `#player-panel`):**

```html
<div id="player-panel">
    <div id="video-stage" style="width: 100%; height: 60%; min-height: 200px; background: black;">
         <div id="yt-player" style="width: 100%; height: 100%;"></div>
    </div>
    
    <div id="splitter-horizontal"></div>

    <div id="player-controls" style="flex: 1; overflow-y: auto;">
        </div>
</div>

```

**3. JavaScript Logic (Replace `makeResizable` with this "Window-Level" version):**

```javascript
function makeResizable() {
    const leftPanel = document.getElementById('left-panel');
    const videoStage = document.getElementById('video-stage');
    const vSplitter = document.getElementById('splitter-vertical');
    const hSplitter = document.getElementById('splitter-horizontal');

    // --- Vertical Resize (Sidebar vs Player) ---
    if (vSplitter) {
        vSplitter.onmousedown = function(e) {
            e.preventDefault(); // Prevent text selection
            document.body.style.cursor = 'col-resize';
            
            // USE WINDOW HANDLERS to prevent "Sticky Mouse"
            function onMouseMove(moveEvent) {
                let newWidth = moveEvent.clientX;
                // Limits: Min 200px, Max 70% of screen
                if (newWidth < 200) newWidth = 200;
                if (newWidth > window.innerWidth * 0.7) newWidth = window.innerWidth * 0.7;
                
                leftPanel.style.width = newWidth + 'px';
                localStorage.setItem('layout_sidebar_width', newWidth);
            }
            
            function onMouseUp() {
                document.body.style.cursor = 'default';
                window.removeEventListener('mousemove', onMouseMove);
                window.removeEventListener('mouseup', onMouseUp);
            }

            window.addEventListener('mousemove', onMouseMove);
            window.addEventListener('mouseup', onMouseUp);
        };
    }

    // --- Horizontal Resize (Video Height) ---
    if (hSplitter) {
        hSplitter.onmousedown = function(e) {
            e.preventDefault();
            document.body.style.cursor = 'row-resize';
            
            const startY = e.clientY;
            const startHeight = videoStage.getBoundingClientRect().height;

            function onMouseMove(moveEvent) {
                const delta = moveEvent.clientY - startY;
                let newHeight = startHeight + delta;
                
                // Limits: Min 200px, Max 80vh
                if (newHeight < 200) newHeight = 200;
                if (newHeight > window.innerHeight * 0.8) newHeight = window.innerHeight * 0.8;

                videoStage.style.height = newHeight + 'px';
            }

            function onMouseUp() {
                document.body.style.cursor = 'default';
                window.removeEventListener('mousemove', onMouseMove);
                window.removeEventListener('mouseup', onMouseUp);
            }

            window.addEventListener('mousemove', onMouseMove);
            window.addEventListener('mouseup', onMouseUp);
        };
    }
}

```

Please apply these structural and logic fixes immediately.
